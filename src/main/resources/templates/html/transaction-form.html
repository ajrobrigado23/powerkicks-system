<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Powerkicks Taekwondo</title>

    <!-- CSS Bootstrap-->
    <link rel="stylesheet" th:href="@{/css/bootstrap/bootstrap.css}">
    <!-- CSS Bootstrap DEVELOPER MODE-->
    <link rel="stylesheet" href="../../static/css/bootstrap/bootstrap.css">


    <!-- CSS Style -->
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <!-- CSS Style DEVELOPER MODE-->
    <link rel="stylesheet" href="../../static/css/style.css">
</head>
<body>
<div class="container-fluid">
    <div class="row align-items-center min-vh-100">
        <!--First column-->
        <div class="col-lg-3 bg-light text-white vh-100" style="padding: 0;">
            Col-3
        </div>
        <!--Second Column (Transaction card form)-->
        <div class="col-lg-6 d-flex justify-content-center align-items-center vh-100 bg-light">

            <!--Transaction Details FORM-->
            <div class="card overflow-hidden bg-white shadow-lg rounded-2 border-0 w-75">
                <!-- Card Header-->
                <div class="row" th:object="${transactionRequestDTO}">
                    <div class="col-12 d-inline-flex flex-column justify-content-center align-items-center">
                        <h4 class="fw-bolder text-center m-3">Payment Details</h4>
                        <!-- ERROR ALERT -->
                        <!-- (FIRST NAME) Add an error message -->
                        <div    th:if="${#fields.hasErrors('firstName')}"
                                class="d-flex align-items-center justify-content-center m-auto"
                                role="alert">
                            <!-- Bootstrap using the bootstrap-icons.svg(sprite)-->
                            <svg class="bi me-3 text-danger" width="18" height="18" fill="currentColor">
                                <use    th:attr="href=@{/icons/bootstrap-icons.svg#exclamation-triangle-fill}"></use>
                            </svg>
                            <span   class="text-danger fst-italic custom-text-sm"
                                    th:errors="*{firstName}"></span>
                        </div>
                        <!-- (LAST NAME) Add an error message -->
                        <div    th:if="${#fields.hasErrors('lastName')}"
                                class="d-flex align-items-center justify-content-center m-auto"
                                role="alert">
                            <!-- Bootstrap using the bootstrap-icons.svg(sprite)-->
                            <svg class="bi me-3 text-danger" width="18" height="18" fill="currentColor">
                                <use th:attr="href=@{/icons/bootstrap-icons.svg#exclamation-triangle-fill}"></use>
                            </svg>
                            <span   class="text-danger fst-italic custom-text-sm"
                                    th:errors="*{lastName}"></span>
                        </div>
                        <!-- (Email address) Add an error message -->
                        <div    th:if="${#fields.hasErrors('emailAddress')}"
                                class="d-flex align-items-center justify-content-center m-auto"
                                role="alert">
                            <!-- Bootstrap using the bootstrap-icons.svg(sprite)-->
                            <svg class="bi me-3 text-danger" width="18" height="18" fill="currentColor">
                                <use th:attr="href=@{/icons/bootstrap-icons.svg#exclamation-triangle-fill}"></use>
                            </svg>
                            <span   class="text-danger fst-italic custom-text-sm"
                                    th:errors="*{emailAddress}"></span>
                        </div>

                        <!-- (Payment Method) Add an error message -->
                        <div    th:if="${#fields.hasErrors('paymentMethod')}"
                                class="d-flex align-items-center justify-content-center m-auto"
                                role="alert">
                            <!-- Bootstrap using the bootstrap-icons.svg(sprite)-->
                            <svg class="bi me-3 text-danger" width="18" height="18" fill="currentColor">
                                <use th:attr="href=@{/icons/bootstrap-icons.svg#exclamation-triangle-fill}"></use>
                            </svg>
                            <span   class="text-danger fst-italic custom-text-sm"
                                    th:errors="*{paymentMethod}"></span>
                        </div>

                        <!-- (Payment Month) Add an error message -->
                        <div    th:if="${#fields.hasErrors('paymentMonth')}"
                                class="d-flex align-items-center justify-content-center m-auto"
                                role="alert">
                            <!-- Bootstrap using the bootstrap-icons.svg(sprite)-->
                            <svg class="bi me-3 text-danger" width="18" height="18" fill="currentColor">
                                <use th:attr="href=@{/icons/bootstrap-icons.svg#exclamation-triangle-fill}"></use>
                            </svg>
                            <span   class="text-danger fst-italic custom-text-sm"
                                    th:errors="*{paymentMonth}"></span>
                        </div>

                        <!-- (Amount) Add an error message -->
                        <div    th:if="${#fields.hasErrors('amount')}"
                                class="d-flex align-items-center justify-content-center m-auto"
                                role="alert">
                            <!-- Bootstrap using the bootstrap-icons.svg(sprite)-->
                            <svg class="bi me-3 text-danger" width="18" height="18" fill="currentColor">
                                <use th:attr="href=@{/icons/bootstrap-icons.svg#exclamation-triangle-fill}"></use>
                            </svg>
                            <span   class="text-danger fst-italic custom-text-sm"
                                    th:errors="*{amount}"></span>
                        </div>

                        <!-- (Full name exist) Add an error message -->
                        <div    th:if="${personExist}"
                                class="d-flex align-items-center justify-content-center m-auto"
                                role="alert">
                            <!-- Bootstrap using the bootstrap-icons.svg(sprite)-->
                            <svg class="bi me-3 text-danger" width="18" height="18" fill="currentColor">
                                <use th:attr="href=@{/icons/bootstrap-icons.svg#exclamation-triangle-fill}"></use>
                            </svg>
                            <span   class="text-danger fst-italic custom-text-sm"
                                    th:text="${personExist}"></span>
                        </div>

                    </div>
                </div>

                <!-- Card Body-->
                <div class="card-body">

                    <!-- FORMS (Payment Details)-->
                    <form th:action="@{/transactions/saveTransactionDetails}" th:object="${transactionRequestDTO}" class="container" method="POST">

                        <!-- FIRST ROW -->
                        <div class="row g-3">
                            <!-- First Name-->
                            <div class="col-6">
                                <label class="custom-text-xs fw-bold form-label">First Name</label>
                                <div class="form-floating">
                                    <input th:field="${transactionRequestDTO.firstName}" type="text" name="firstName" class="fw-bolder form-control custom-input-height" id="floatingFirstName" placeholder="firstName">
                                    <label class="custom-text-sm" for="floatingFirstName">Enter your first name</label>
                                </div>
                            </div>
                            <!-- Last name-->
                            <div class="col-6">
                                <label class="custom-text-xs fw-bold form-label">Last Name</label>
                                <div class="form-floating">
                                    <input th:field="${transactionRequestDTO.lastName}" type="text" name="lastName" class="fw-bolder form-control custom-input-height" id="floatingLastName" placeholder="lastName">
                                    <label class="custom-text-sm" for="floatingLastName">Enter your last name</label>
                                </div>
                            </div>

                        </div>

                        <!-- SECOND ROW-->
                        <div class="row g-3">
                            <!-- Email Address-->
                            <div class="col-12">
                                <label class="custom-text-xs fw-bold form-label">Email Address</label>
                                <div class="form-floating">
                                    <input th:field="${transactionRequestDTO.emailAddress}" type="text" name="firstName" class="fw-bolder form-control custom-input-height" id="floatingEmail" placeholder="emailAddress">
                                    <label class="custom-text-sm" for="floatingEmail">Enter your email address</label>
                                </div>
                            </div>
                        </div>

                        <!-- THIRD ROW-->
                        <div class="row g-3">
                            <!-- Payment Method (Drop down list)-->
                            <div class="col-6">
                                <label class="custom-text-xs fw-bold form-label">Payment Method</label>
                                <!-- Drop down list choices -->
                                <div class="dropdown">
                                    <!-- Dropdown button that will display the selected payment method -->
                                    <div class="dropdown">
                                        <button class="btn border border-secondary-subtle dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
                                            <span id="dropdownLabel">
                                                Payment Method
                                                <!-- Bootstrap using the bootstrap-icons.svg(sprite)-->
                                                    <svg class="bi ms-2" width="16" height="16" fill="black">
                                                        <use th:attr="href=@{/icons/bootstrap-icons.svg#chevron-down}"
                                                             xlink:href="../../static/icons/bootstrap-icons.svg#chevron-down"></use>
                                                    </svg>
                                            </span>
                                        </button>
                                        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                            <!-- Thymeleaf iterates over the options and creates dropdown items -->
                                            <li th:each="payment : ${listOfPaymentMethod}">
                                                <a class="dropdown-item" href="#" th:text="${payment}" th:value="${payment}" onclick="updateDropdownMethod(this)"></a>
                                            </li>
                                        </ul>
                                    </div>

                                    <!-- Hidden input to hold the selected payment value -->
                                    <input th:field="${transactionRequestDTO.paymentMethod}" type="hidden" id="selectedPaymentMethod" name="paymentMethod" th:value="${selectedPaymentMethod}">
                                </div>

                            </div>

                            <!-- Payment Month (Drop down list)-->
                            <div class="col-6">
                                <label class="custom-text-xs fw-bold form-label">Payment Month</label>
                                <!-- Drop down list choices -->
                                <div class="dropdown">
                                    <!-- Dropdown button that will display the selected payment method -->
                                    <div class="dropdown">
                                        <button class="btn border border-secondary-subtle dropdown-toggle" type="button" id="dropdownMenuButtonMonth" data-bs-toggle="dropdown" aria-expanded="false">
                                            <span id="dropdownLabelMonth">
                                                Payment Month
                                                <!-- Bootstrap using the bootstrap-icons.svg(sprite)-->
                                                    <svg class="bi ms-2" width="16" height="16" fill="black">
                                                        <use th:attr="href=@{/icons/bootstrap-icons.svg#chevron-down}"
                                                             xlink:href="../../static/icons/bootstrap-icons.svg#chevron-down"></use>
                                                    </svg>
                                            </span>
                                        </button>
                                        <ul class="dropdown-menu dropdown-menu-months" aria-labelledby="dropdownMenuButtonMonth">
                                            <!-- Thymeleaf iterates over the options and creates dropdown items -->
                                            <li th:each="month : ${listOfMonths}">
                                                <a class="dropdown-item" href="#" th:text="${month}" th:value="${month}" onclick="updateDropdownMonth(this)"></a>
                                            </li>
                                        </ul>
                                    </div>

                                    <!-- Hidden input to hold the selected payment value -->
                                    <input th:field="${transactionRequestDTO.paymentMonth}" type="hidden" id="selectedPaymentMonth" name="paymentMonth" th:value="${selectedPaymentMonth}">
                                </div>
                            </div>

                        </div>

                        <!-- FOURTH ROW-->
                        <div class="row g-3">
                            <!-- Amount-->
                            <div class="col-1 d-flex align-items-end justify-content-center">
                                <h1>â‚±</h1>
                            </div>

                            <div class="col-11">
                                <label class="custom-text-xs fw-bold form-label">Payment Amount</label>
                                <div class="form-floating">
                                    <input th:field="${transactionRequestDTO.amount}" type="text" name="firstName" class="fw-bolder form-control custom-input-height" id="floatingAmount" placeholder="paymentAmount">
                                    <label class="custom-text-sm" for="floatingAmount">Enter the amount</label>
                                </div>
                            </div>

                        </div>


                        <!--BUTTONS-->
                        <div class="row g-3">
                            <div class="col-6">
                                <a th:href="@{/homepage}" type="submit" class="btn btn-danger mt-3 w-100 rounded-0" style="
                                   --bs-btn-padding-y: .50rem;
                                   --bs-btn-font-size: .75rem;
                                   --bs-btn-font-weight: 600;">Cancel</a>
                            </div>

                            <div class="col-6">
                                <button type="submit" class="btn btn-success mt-3 w-100 rounded-0" style="
                                   --bs-btn-padding-y: .50rem;
                                   --bs-btn-font-size: .75rem;
                                   --bs-btn-font-weight: 600;">Add Payment</button>
                            </div>

                        </div>

                    </form>

                </div>


            </div>
        </div>
        <!--Third column-->
        <div class="col-lg-3 bg-light text-white vh-100" style="padding: 0;">
            Col-3
        </div>

    </div>
</div>


<!-- Javascript Bootstrap-->
<script th:src="@{/js/bootstrap.js}"></script>
<script th:src="@{/js/bootstrap.bundle.js}"></script>
<!-- Javascript Bootstrap DEVELOPER MODE-->
<script src="../../static/js/bootstrap.js"></script>
<!-- Bootstrap for our Pop-up(Dropdown menu) -->
<script src="../../static/js/bootstrap.bundle.js"></script>

<!-- Custom JavaScript to update the dropdown label and hidden input -->
<script>
    // Transaction METHOD
    function updateDropdownMethod(item) {
        // Get the text of the clicked item
        const selectedPayment = item.innerText;

        // Transaction METHOD
        // Update the dropdown button's label
        document.getElementById('dropdownLabel').innerText = selectedPayment;

        // Update the hidden input field to hold the selected value
        document.getElementById('selectedPaymentMethod').value = selectedPayment;
    }

    function updateDropdownMonth(item) {
        // Get the text of the clicked item
        const selectedMonth = item.innerText;

        // Transaction MONTH
        // Update the dropdown button's label
        document.getElementById('dropdownLabelMonth').innerText = selectedMonth;

        // Update the hidden input field to hold the selected value
        document.getElementById('selectedPaymentMonth').value = selectedMonth;
    }
</script>

</body>
</html>